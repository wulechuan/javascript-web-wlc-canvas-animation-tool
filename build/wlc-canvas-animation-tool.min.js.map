{"version":3,"sources":["wlc-canvas-animation-tool.js"],"names":["createWhatWeWant","window","wlcCanvasAnimationController","canvas","a","b","_init","initOptions","regExpCanvasContextType","thisInstance","pN_drawFrame","match","canvasContextType","trim","toLowerCase","canvasContext","getContext","config","call","animationShouldStop","b_startAnimation","getData","stateCopy","animationStartWallTime","localTimeInSeconds","drawnFramesCount","pN_shouldClearCanvasBeforeDrawing","shouldClearCanvasBeforeDrawing","pN_bgColor","bgColor","pN_animationShouldStop","pN_animationIsStopped","animationIsStopped","pN_animationShouldPause","animationShouldPause","pN_animationIsPaused","animationIsPaused","pN_timeOffsetInSeconds","timeOffsetInSeconds","pN_wallTimeOfLatestPause","wallTimeOfLatestPause","pN_wallTimeOfLatestResume","wallTimeOfLatestResume","pN_shouldPauseButNotStopWhenAnyLimiationMet","shouldPauseButNotStopWhenAnyLimiationMet","pN_localTimeAfterWhichToStopOrPauseAnimation","localTimeAfterWhichToStopOrPauseAnimation","pN_wallTimeAfterWhichToStopOrPauseAnimation","wallTimeAfterWhichToStopOrPauseAnimation","pN_drawingFramesCountLimitation","drawingFramesCountLimitation","elements","data","state","_definePublicState","publicState","Object","defineProperty","enumerable","get","set","shouldClear","newColor","pN_isValidColor","isToStopAnimation","stopAnimation","startAnimation","console","warn","isToPauseAnimation","pauseAnimation","resumeAnimation","offset","parseFloat","isNaN","shouldPauseInsteadOfStop","timePoint","dateTime","Math","max","Date","limitation","NaN","parseInt","options","hasOwnProperty","getCanvas","getCanvasContext","getCanvasContextType","clearCanvasViaMethod","b_clearCanvas","b_stopAnimation","_clearCanvas","clearRect","width","height","shouldClearCanvas","newTimeOffset","getTime","b_drawNextFrame","_drawNextFrame","info","atLeastOnLimiationMet","log","now","b_pauseAnimation","b_drawOneFrame","requestAnimationFrame","drawOneFrame","_drawOneFrameOnTime","drawOneFrameOnTimeViaMethod","desiredTimeInSeconds","timeInSeconds","_drawOrClearBg","fillStyle","fillRect","this","settings","canvasDefaultBgColor","canvasDefaultContextType","error","Node","document","getElementById","pN_isJQueryWrappedObjectOrAlike","tagName","DOMPropertyNameForThisTypeOfInstance","appendChild","createElement","writable","value","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","bind","b_resumeAnimation","drawOneFrameOnTime","clearCanvas","object","prototype","getPrototypeOf","jquery","color"],"mappings":"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","file":"wlc-canvas-animation-tool.min.js","sourcesContent":["(function (createWhatWeWant) {\n\twindow.wlcCanvasAnimationController = createWhatWeWant();\n})(function createWhatWeWant() {\n\t// To define some long property names this way helps js better minified.\n\t// Because we are using local variables as keys to access properties,\n\t// and local variables can be minified,\n\t// while strings and direct property keys can not be minified.\n\tvar DOMPropertyNameForThisTypeOfInstance = 'wlcCanvasAnimationControllerInstance';\n\tvar pN_isJQueryWrappedObjectOrAlike = 'isJQueryWrappedObjectOrAlike';\n\tvar pN_isJQueryWrappedObject = 'isJQueryWrappedObject';\n\tvar pN_isValidColor = 'isValidColor';\n\n\tvar pN_drawFrame = 'drawFrame';\n\n\tvar pN_shouldClearCanvasBeforeDrawing = 'shouldClearCanvasBeforeDrawing';\n\tvar pN_bgColor = 'bgColor';\n\n\tvar pN_animationShouldStop = 'animationShouldStop';\n\tvar pN_animationIsStopped = 'animationIsStopped';\n\tvar pN_animationShouldPause = 'animationShouldPause';\n\tvar pN_animationIsPaused = 'animationIsPaused';\n\n\tvar pN_timeOffsetInSeconds = 'timeOffsetInSeconds';\n\n\tvar pN_wallTimeOfLatestPause = 'wallTimeOfLatestPause';\n\tvar pN_wallTimeOfLatestResume = 'wallTimeOfLatestResume';\n\n\tvar pN_shouldPauseButNotStopWhenAnyLimiationMet = 'shouldPauseButNotStopWhenAnyLimiationMet';\n\tvar pN_localTimeAfterWhichToStopOrPauseAnimation = 'localTimeAfterWhichToStopOrPauseAnimation'; // in seconds\n\tvar pN_wallTimeAfterWhichToStopOrPauseAnimation = 'wallTimeAfterWhichToStopOrPauseAnimation'; // in milliseconds\n\tvar pN_drawingFramesCountLimitation = 'drawingFramesCountLimitation';\n\n\n\n\n\t/**\n\t * Constructor for create an instant object that helps making canvas animations.\n\t * \n\t * @constructor\n\t * @author 吴乐川 <wulechuan@live.com>\n\t * @argument {!(string|Node|jQueryObject)} canvas the canvas element,\n\t * \tor the container object that is NOT a canvas element,\n\t *  under which a new canvas element will be created automatically.\n\t * \n\t * @argument {?(string|function|object)} a Multi-purpose.\n\t * \t\tIf 1 argument is provided:\n\t * \t\t>\tIf it's a string, it's treated as the canvas context type;\n\t * \t\t\tIf it's an object, it's treated as the \"options\" objet;\n\t * \t\t\tIf it's a function, it's treated as the \"drawFrame\" method.\n\t * \n\t * \t\tIf 2 arguments are provided:\n\t * \t\t>\tThe one that is a string is treated as the canvas context type;\n\t * \t\t\tThe one that is an object is treated as the \"options\" objet;\n\t * \t\t\tThe one that is a function is treated as the \"drawFrame\" method;\n\t * \n\t * \t\t\tTf both are of the same type, e. g. both are functions,\n\t * \t\t\tan error will be logged and construction will fail.\n\t * \n\t * \t\t\tIf a function is provided, while the other argument being an object,\n\t * \t\t\tand contains a function property named \"drawFrame\",\n\t * \t\t\tthen the property of the object argument is taken,\n\t * \t\t\tthe function argument is ignored.\n\t * \n\t * @argument {?(string|function|object)} b Multi-purpose.\n\t * >\tSee argument a.\n\t * \n\t * \n\t * @example\n\t * \tvar myCanvas = document.querySelector('#my-canvas');\n\t *  var myAniCtrl = new wlcCanvasAnimationController(\n\t * \t\tmyCanvas,\n\t * \t\tfunction myFancyDrawingFunction () { ... }\n\t *  );\n\t * \n\t * @example\n\t * \tvar myCanvas = document.querySelector('#my-canvas');\n\t *  var myAniCtrl = new wlcCanvasAnimationController(\n\t * \t\tmyCanvas,\n\t * \t\t{\n\t * \t\t\tdrawFrame: function myFancyDrawingFunction() { ... }\n\t * \t\t}\n\t *  );\n\t * \n\t * @example\n\t * \tvar myCanvas = document.querySelector('#my-canvas');\n\t *  var myAniCtrl = new wlcCanvasAnimationController(\n\t * \t\tmyCanvas,\n\t * \t\t'3d',\n\t * \t\t{\n\t * \t\t\tdrawFrame: function myFancyDrawingFunction() { ... }\n\t * \t\t}\n\t *  );\n\t */\n\n\tfunction wlcCanvasAnimationController(canvas, a, b) {\n\t\tvar thisInstance = this;\n\n\t\tvar settings = {\n\t\t\tcanvasDefaultBgColor: '',\n\t\t\tcanvasDefaultContextType: '2d'\n\t\t};\n\n\n\n\n\n\n\n\n\t\t// private variables\n\t\tvar canvasContext = null;\n\t\tvar canvasContextType = settings.canvasDefaultContextType;\n\n\t\tvar shouldClearCanvasBeforeDrawing = true;\n\t\tvar bgColor = settings.canvasDefaultBgColor;\n\n\t\tvar animationShouldStop = false;\n\t\tvar animationIsStopped = true;\n\t\tvar animationShouldPause = false;\n\t\tvar animationIsPaused = false;\n\n\t\tvar timeOffsetInSeconds = 0;\n\n\t\tvar shouldPauseButNotStopWhenAnyLimiationMet = false; // \"true\" means should stop instead of pause.\n\t\tvar localTimeAfterWhichToStopOrPauseAnimation = NaN;\n\t\tvar wallTimeAfterWhichToStopOrPauseAnimation = NaN;\n\t\tvar drawingFramesCountLimitation = NaN; // In case we need to draw like 1000 frames and then stop there for ever\n\n\n\t\t// internal derived values\n\t\tvar animationStartWallTime = NaN;\n\t\tvar wallTimeOfLatestPause = NaN;\n\t\tvar wallTimeOfLatestResume = NaN;\n\t\tvar localTimeInSeconds = 0;\n\t\tvar drawnFramesCount = 0;\n\n\n\n\n\n\n\t\tif ((typeof a === 'object' && typeof b === 'object' && a && b)\n\t\t\t|| (typeof a === 'string' && typeof b === 'string')\n\t\t\t|| (typeof a === 'function' && typeof b === 'function')\n\t\t) {\n\t\t\tconsole && console.error('Invalid arguments.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas instanceof Node)) {\n\t\t\tif (typeof canvas === 'string') {\n\t\t\t\tcanvas = document.getElementById(canvas);\n\t\t\t} else if (wlcCanvasAnimationController[pN_isJQueryWrappedObjectOrAlike](canvas)) {\n\t\t\t\tcanvas = canvas[0];\n\t\t\t} else {\n\t\t\t\tcanvas = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!canvas) {\n\t\t\tconsole && console.error('Invalid canvas provided.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (canvas.tagName.match(/canvas/i)) {\n\t\t\tif (canvas[DOMPropertyNameForThisTypeOfInstance]) {\n\t\t\t\treturn canvas[DOMPropertyNameForThisTypeOfInstance];\n\t\t\t}\n\t\t} else {\n\t\t\tcanvas = canvas.appendChild(document.createElement('canvas'));\n\t\t}\n\n\n\n\n\n\n\t\tObject.defineProperty(canvas, DOMPropertyNameForThisTypeOfInstance, {\n\t\t\tenumerable: true,\n\t\t\twritable: false,\n\t\t\tvalue: thisInstance\n\t\t});\n\n\n\n\n\n\n\t\tvar requestAnimationFrame =\n\t\t\twindow.requestAnimationFrame\n\t\t\t|| window.mozRequestAnimationFrame\n\t\t\t|| window.webkitRequestAnimationFrame\n\t\t\t|| window.msRequestAnimationFrame\n\t\t\t|| function (callback) {\n\t\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t\t};\n\n\t\t// Being public means being writable.\n\t\tvar publicState = _definePublicState.call(thisInstance);\n\t\tthisInstance.state = publicState;\n\n\n\t\t// Define \"this\"-bound methods for conveniences and better source code minification.\n\t\tvar b_drawNextFrame = _drawNextFrame.bind(thisInstance);\n\t\tvar b_stopAnimation = stopAnimation.bind(thisInstance);\n\t\tvar b_startAnimation = startAnimation.bind(thisInstance);\n\t\tvar b_pauseAnimation = pauseAnimation.bind(thisInstance);\n\t\tvar b_resumeAnimation = resumeAnimation.bind(thisInstance);\n\t\tvar b_clearCanvas = _clearCanvas.bind(thisInstance);\n\t\tvar b_drawOneFrame = drawOneFrame.bind(thisInstance);\n\n\n\t\tthisInstance.config = config.bind(thisInstance);\n\t\tthisInstance.getData = getData.bind(thisInstance);\n\t\tthisInstance.getCanvas = getCanvas.bind(thisInstance);\n\t\tthisInstance.getCanvasContext = getCanvasContext.bind(thisInstance);\n\t\tthisInstance.getCanvasContextType = getCanvasContextType.bind(thisInstance);\n\n\t\tthisInstance.stopAnimation = b_stopAnimation;\n\t\tthisInstance.startAnimation = b_startAnimation;\n\t\tthisInstance.pauseAnimation = b_pauseAnimation;\n\t\tthisInstance.resumeAnimation = b_resumeAnimation;\n\n\t\tthisInstance.drawOneFrame = b_drawOneFrame;\n\t\tthisInstance.drawOneFrameOnTime = drawOneFrameOnTimeViaMethod.bind(thisInstance);\n\t\tthisInstance.clearCanvas = clearCanvasViaMethod.bind(thisInstance);\n\n\n\n\t\t_init.call(thisInstance, a, b);\n\n\n\n\n\n\n\n\t\tfunction _init(a, b) {\n\t\t\tvar regExpCanvasContextType = /\\s*(2d|3d|webgl)\\s*/i;\n\t\t\tvar initOptions;\n\n\t\t\tif (typeof a === 'object' && a) {\n\t\t\t\tinitOptions = a;\n\n\t\t\t\tif (typeof b === 'function') {\n\t\t\t\t\tthisInstance[pN_drawFrame] = b;\n\t\t\t\t} else if (typeof b === 'string' && b.match(regExpCanvasContextType)) {\n\t\t\t\t\tcanvasContextType = b.trim().toLowerCase();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof b === 'object' && b) {\n\t\t\t\tinitOptions = b;\n\n\t\t\t\tif (typeof a === 'function') {\n\t\t\t\t\tthisInstance[pN_drawFrame] = a;\n\t\t\t\t} else if (typeof a === 'string' && a.match(regExpCanvasContextType)) {\n\t\t\t\t\tcanvasContextType = a.trim().toLowerCase();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcanvasContext = canvas.getContext(canvasContextType);\n\n\t\t\tconfig.call(thisInstance, initOptions);\n\n\n\t\t\tif (!animationShouldStop) {\n\t\t\t\t// if animationShouldPause,\n\t\t\t\t// then we still need to first start the animation.\n\t\t\t\t// Because to pause a stopped animation doesn't make any sence.\n\t\t\t\treturn b_startAnimation();\n\t\t\t}\n\t\t}\n\n\n\n\t\t/**\n\t\t * Get a copy of all private data just for inspection\n\t\t * @return {object}\n\t\t */\n\t\tfunction getData() {\n\t\t\tvar stateCopy = {\n\t\t\t\tanimationStartWallTime: animationStartWallTime,\n\t\t\t\tlocalTimeInSeconds: localTimeInSeconds,\n\t\t\t\tdrawnFramesCount: drawnFramesCount\n\t\t\t};\n\n\t\t\tstateCopy[pN_shouldClearCanvasBeforeDrawing] = shouldClearCanvasBeforeDrawing;\n\t\t\tstateCopy[pN_bgColor] = bgColor;\n\t\t\tstateCopy[pN_animationShouldStop] = animationShouldStop;\n\t\t\tstateCopy[pN_animationIsStopped] = animationIsStopped;\n\t\t\tstateCopy[pN_animationShouldPause] = animationShouldPause;\n\t\t\tstateCopy[pN_animationIsPaused] = animationIsPaused;\n\t\t\tstateCopy[pN_timeOffsetInSeconds] = timeOffsetInSeconds;\n\t\t\tstateCopy[pN_wallTimeOfLatestPause] = wallTimeOfLatestPause;\n\t\t\tstateCopy[pN_wallTimeOfLatestResume] = wallTimeOfLatestResume;\n\t\t\tstateCopy[pN_shouldPauseButNotStopWhenAnyLimiationMet] = shouldPauseButNotStopWhenAnyLimiationMet;\n\t\t\tstateCopy[pN_localTimeAfterWhichToStopOrPauseAnimation] = localTimeAfterWhichToStopOrPauseAnimation;\n\t\t\tstateCopy[pN_wallTimeAfterWhichToStopOrPauseAnimation] = wallTimeAfterWhichToStopOrPauseAnimation;\n\t\t\tstateCopy[pN_drawingFramesCountLimitation] = drawingFramesCountLimitation;\n\n\t\t\treturn {\n\t\t\t\telements: {\n\t\t\t\t\tcanvas: canvas\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tcanvasContext: canvasContext,\n\t\t\t\t\tcanvasContextType: canvasContextType\n\t\t\t\t},\n\t\t\t\tstate: stateCopy\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Define some properties using getters and setters,\n\t\t * So that they can be accessed directly in public.\n\t\t * @return {object}\n\t\t */\n\t\tfunction _definePublicState() {\n\t\t\tvar publicState = {};\n\n\t\t\tObject.defineProperty(publicState, pN_shouldClearCanvasBeforeDrawing, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn shouldClearCanvasBeforeDrawing;\n\t\t\t\t},\n\t\t\t\tset: function (shouldClear) {\n\t\t\t\t\tshouldClearCanvasBeforeDrawing = !!shouldClear;\n\t\t\t\t\treturn shouldClearCanvasBeforeDrawing;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_bgColor, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn bgColor;\n\t\t\t\t},\n\t\t\t\tset: function (newColor) {\n\t\t\t\t\tif (wlcCanvasAnimationController[pN_isValidColor](newColor)) {\n\t\t\t\t\t\tbgColor = newColor.trim().toLowerCase();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn bgColor;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_animationShouldStop, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn animationShouldStop;\n\t\t\t\t},\n\t\t\t\tset: function (isToStopAnimation) {\n\t\t\t\t\tif (isToStopAnimation) {\n\t\t\t\t\t\tstopAnimation.call(thisInstance);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstartAnimation.call(thisInstance);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn animationShouldStop;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_animationIsStopped, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn animationIsStopped;\n\t\t\t\t},\n\t\t\t\tset: function () {\n\t\t\t\t\tconsole.warn('state.'+pN_animationIsStopped+' is a read-only property.');\n\t\t\t\t\treturn animationIsStopped;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_animationShouldPause, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn animationShouldPause;\n\t\t\t\t},\n\t\t\t\tset: function (isToPauseAnimation) {\n\t\t\t\t\tif (isToPauseAnimation) {\n\t\t\t\t\t\tpauseAnimation.call(thisInstance);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresumeAnimation.call(thisInstance);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn animationShouldPause;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_animationIsPaused, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn animationIsPaused;\n\t\t\t\t},\n\t\t\t\tset: function () {\n\t\t\t\t\tconsole.warn('state.'+pN_animationIsPaused+' is a read-only property.');\n\t\t\t\t\treturn animationIsPaused;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_timeOffsetInSeconds, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn timeOffsetInSeconds;\n\t\t\t\t},\n\t\t\t\tset: function (offset) {\n\t\t\t\t\toffset = parseFloat(offset);\n\t\t\t\t\tif (!isNaN(offset)) {\n\t\t\t\t\t\ttimeOffsetInSeconds = offset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn timeOffsetInSeconds;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_shouldPauseButNotStopWhenAnyLimiationMet, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn shouldPauseButNotStopWhenAnyLimiationMet;\n\t\t\t\t},\n\t\t\t\tset: function (shouldPauseInsteadOfStop) {\n\t\t\t\t\tshouldPauseButNotStopWhenAnyLimiationMet = !!shouldPauseInsteadOfStop;\n\t\t\t\t\treturn shouldPauseButNotStopWhenAnyLimiationMet;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_localTimeAfterWhichToStopOrPauseAnimation, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn localTimeAfterWhichToStopOrPauseAnimation;\n\t\t\t\t},\n\t\t\t\tset: function (timePoint) {\n\t\t\t\t\ttimePoint = parseFloat(timePoint);\n\t\t\t\t\tif (!isNaN(timePoint)) {\n\t\t\t\t\t\tlocalTimeAfterWhichToStopOrPauseAnimation = timePoint;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn localTimeAfterWhichToStopOrPauseAnimation;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_wallTimeAfterWhichToStopOrPauseAnimation, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn wallTimeAfterWhichToStopOrPauseAnimation;\n\t\t\t\t},\n\t\t\t\tset: function (dateTime) {\n\t\t\t\t\tdateTime = parseFloat(dateTime);\n\t\t\t\t\tif (!isNaN(dateTime) && dateTime>=0) {\n\t\t\t\t\t\twallTimeAfterWhichToStopOrPauseAnimation = Math.max(new Date(), dateTime);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn wallTimeAfterWhichToStopOrPauseAnimation;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(publicState, pN_drawingFramesCountLimitation, {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn drawingFramesCountLimitation;\n\t\t\t\t},\n\t\t\t\tset: function (limitation) {\n\t\t\t\t\tif (isNaN(limitation)) {\n\t\t\t\t\t\tdrawingFramesCountLimitation = NaN;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlimitation = parseInt(limitation);\n\t\t\t\t\t\tif (!isNaN(limitation) && limitation>=0) {\n\t\t\t\t\t\t\tdrawingFramesCountLimitation = limitation;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn drawingFramesCountLimitation;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn publicState;\n\t\t}\n\n\t\tfunction config(options) {\n\t\t\toptions = options || {};\n\n\t\t\tif (typeof options === 'function') {\n\t\t\t\tthisInstance[pN_drawFrame] = options;\n\t\t\t\treturn thisInstance;\n\t\t\t}\n\n\t\t\tif (typeof options[pN_drawFrame] === 'function') {\n\t\t\t\tthisInstance[pN_drawFrame] = options[pN_drawFrame];\n\t\t\t}\n\n\n\t\t\t// Just use defined setters to update public values,\n\t\t\t// so that we don't need to write type/value validation codes again here.\n\t\t\tif (options.hasOwnProperty(pN_shouldClearCanvasBeforeDrawing)) {\n\t\t\t\tpublicState[pN_shouldClearCanvasBeforeDrawing] =\n\t\t\t\t\toptions[pN_shouldClearCanvasBeforeDrawing];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_bgColor)) {\n\t\t\t\tpublicState[pN_bgColor] =\n\t\t\t\t\toptions[pN_bgColor];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_animationShouldStop)) {\n\t\t\t\tpublicState[pN_animationShouldStop] =\n\t\t\t\t\toptions[pN_animationShouldStop];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_animationShouldPause)) {\n\t\t\t\tpublicState[pN_animationShouldPause] =\n\t\t\t\t\toptions[pN_animationShouldPause];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_timeOffsetInSeconds)) {\n\t\t\t\tpublicState[pN_timeOffsetInSeconds] =\n\t\t\t\t\toptions[pN_timeOffsetInSeconds];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_shouldPauseButNotStopWhenAnyLimiationMet)) {\n\t\t\t\tpublicState[pN_shouldPauseButNotStopWhenAnyLimiationMet] =\n\t\t\t\t\toptions[pN_shouldPauseButNotStopWhenAnyLimiationMet];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_localTimeAfterWhichToStopOrPauseAnimation)) {\n\t\t\t\tpublicState[pN_localTimeAfterWhichToStopOrPauseAnimation] =\n\t\t\t\t\toptions[pN_localTimeAfterWhichToStopOrPauseAnimation];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_wallTimeAfterWhichToStopOrPauseAnimation)) {\n\t\t\t\tpublicState[pN_wallTimeAfterWhichToStopOrPauseAnimation] =\n\t\t\t\t\toptions[pN_wallTimeAfterWhichToStopOrPauseAnimation];\n\t\t\t}\n\n\t\t\tif (options.hasOwnProperty(pN_drawingFramesCountLimitation)) {\n\t\t\t\tpublicState[pN_drawingFramesCountLimitation] =\n\t\t\t\t\toptions[pN_drawingFramesCountLimitation];\n\t\t\t}\n\n\n\t\t\treturn thisInstance; // for chaining method invocations\n\t\t}\n\n\t\tfunction getCanvas() {\n\t\t\treturn canvas;\n\t\t}\n\n\t\tfunction getCanvasContext() {\n\t\t\treturn canvasContext;\n\t\t}\n\n\t\tfunction getCanvasContextType() {\n\t\t\treturn canvasContextType;\n\t\t}\n\n\t\tfunction clearCanvasViaMethod() {\n\t\t\tb_clearCanvas();\n\t\t\treturn b_stopAnimation(); // for chaining method invocations\n\t\t}\n\n\t\tfunction _clearCanvas() {\n\t\t\tcanvasContext.clearRect(0, 0, canvas.width, canvas.height);\n\t\t\treturn thisInstance; // for chaining method invocations\n\t\t}\n\n\t\tfunction stopAnimation(shouldClearCanvas) {\n\t\t\t// I comment out this line below to ensure\n\t\t\t// that everything gets reset in stopAnimation method.\n\t\t\t// if (animationIsStopped) return;\n\n\t\t\tanimationIsStopped = true;\n\t\t\tanimationIsPaused = false;\n\n\t\t\tanimationShouldPause = false;\n\t\t\tanimationShouldStop = false;\n\n\t\t\tif (shouldClearCanvas) b_clearCanvas();\n\n\t\t\treturn thisInstance; // for chaining method invocations\n\t\t}\n\n\t\tfunction startAnimation(newTimeOffset) {\n\t\t\tif (!animationIsPaused && !animationIsStopped) {\n\t\t\t\treturn thisInstance;\n\t\t\t}\n\n\t\t\tanimationIsStopped = false;\n\t\t\tanimationIsPaused = false;\n\n\t\t\twallTimeOfLatestPause = NaN;\n\t\t\twallTimeOfLatestResume = NaN;\n\n\t\t\tdrawnFramesCount = 0;\n\n\t\t\t// Set twice, if the second value (which is the argument) is invalid and not taken\n\t\t\t// Then the first value (which is zero) takes effects.\n\t\t\tpublicState[pN_timeOffsetInSeconds] = 0;\n\t\t\tpublicState[pN_timeOffsetInSeconds] = newTimeOffset;\n\n\t\t\tanimationStartWallTime = new Date().getTime() - timeOffsetInSeconds;\n\n\t\t\tb_drawNextFrame();\n\n\t\t\t// animationShouldStop = false;\n\t\t\t// animationShouldPause = false;\n\n\t\t\treturn thisInstance; // for chaining method invocations\n\t\t}\n\n\t\tfunction pauseAnimation() {\n\t\t\tif (animationIsStopped || animationIsPaused) return;\n\n\t\t\tanimationIsPaused = true;\n\t\t\tanimationShouldPause = false;\n\t\t\twallTimeOfLatestPause = new Date() + 0;\n\n\t\t\treturn thisInstance; // for chaining method invocations\n\t\t}\n\n\t\tfunction resumeAnimation() {\n\t\t\tif (animationIsStopped || !animationIsPaused) return;\n\n\t\t\twallTimeOfLatestResume = new Date() + 0;\n\t\t\ttimeOffsetInSeconds -= (wallTimeOfLatestResume - wallTimeOfLatestPause) / 1000;\n\t\t\tanimationIsPaused = false;\n\t\t\tb_drawNextFrame();\n\n\t\t\treturn thisInstance; // for chaining method invocations\n\t\t}\n\n\t\tfunction _drawNextFrame(/* DOMHighResTimeStamp */) {\n\t\t\t// The \"DOMHighResTimeStamp\" provided by the browser\n\t\t\t// is more accurate but unfortunately NOT what I want.\n\n\t\t\tif (animationIsPaused || animationIsStopped) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (animationShouldStop) {\n\t\t\t\tb_stopAnimation();\n\t\t\t}\n\n\t\t\tif (typeof thisInstance[pN_drawFrame] !== 'function') {\n\t\t\t\tconsole.info(\n\t\t\t\t\t'The \"drawFrame\" method is not provided yet.',\n\t\t\t\t\t'Animation will not start.'\n\t\t\t\t);\n\t\t\t\tb_stopAnimation();\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tvar atLeastOnLimiationMet = false;\n\n\t\t\t// Using common strings for better source code compression.\n\t\t\tvar commonString1 = 'Animation';\n\t\t\tvar commonString2 = 'limitation met.';\n\n\t\t\tdrawnFramesCount++;\n\t\t\tif (drawnFramesCount > drawingFramesCountLimitation) {\n\t\t\t\tatLeastOnLimiationMet = true;\n\t\t\t\tdrawingFramesCountLimitation = NaN;\n\t\t\t\tconsole.log(commonString1, 'frame', commonString2);\n\t\t\t}\n\n\n\t\t\tvar now = +new Date();\n\t\t\tif (now >= wallTimeAfterWhichToStopOrPauseAnimation) {\n\t\t\t\tatLeastOnLimiationMet = true;\n\t\t\t\twallTimeAfterWhichToStopOrPauseAnimation = NaN;\n\t\t\t\tconsole.log(commonString1, 'time', commonString2);\n\t\t\t}\n\n\n\t\t\tlocalTimeInSeconds = (now - animationStartWallTime) / 1000 + timeOffsetInSeconds;\n\t\t\tif (localTimeInSeconds >= localTimeAfterWhichToStopOrPauseAnimation) {\n\t\t\t\tatLeastOnLimiationMet = true;\n\t\t\t\tlocalTimeAfterWhichToStopOrPauseAnimation = NaN;\n\t\t\t\tconsole.log(commonString1, 'local time', commonString2);\n\t\t\t}\n\n\t\t\tif (atLeastOnLimiationMet) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Animation will',\n\t\t\t\t\tshouldPauseButNotStopWhenAnyLimiationMet ? 'pause' : 'stop',\n\t\t\t\t\t'now.'\n\t\t\t\t);\n\t\t\t\tif (shouldPauseButNotStopWhenAnyLimiationMet) {\n\t\t\t\t\treturn b_pauseAnimation();\n\t\t\t\t} else {\n\t\t\t\t\treturn b_stopAnimation();\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (animationShouldPause) {\n\t\t\t\treturn b_pauseAnimation();\n\t\t\t}\n\n\t\t\tb_drawOneFrame();\n\n\t\t\trequestAnimationFrame(b_drawNextFrame);\n\t\t}\n\n\t\tfunction drawOneFrame() {\n\t\t\treturn _drawOneFrameOnTime.call(thisInstance, localTimeInSeconds);\n\t\t}\n\n\t\tfunction drawOneFrameOnTimeViaMethod(desiredTimeInSeconds) {\n\t\t\t_drawOneFrameOnTime.call(thisInstance, desiredTimeInSeconds);\n\t\t\treturn pauseAnimation.call(thisInstance); // for chaining method invocations\n\t\t}\n\n\t\tfunction _drawOneFrameOnTime(timeInSeconds) {\n\t\t\t_drawOrClearBg.call(thisInstance, timeInSeconds)[\n\t\t\t\tpN_drawFrame\n\t\t\t](canvas, canvasContext, timeInSeconds);\n\t\t\treturn thisInstance;\n\t\t}\n\n\t\tfunction _drawOrClearBg() {\n\t\t\tif (shouldClearCanvasBeforeDrawing) {\n\t\t\t\tb_clearCanvas();\n\t\t\t}\n\n\t\t\tif (bgColor && bgColor !== 'transparent') {\n\t\t\t\tcanvasContext.fillStyle = bgColor;\n\t\t\t\tcanvasContext.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t}\n\n\t\t\treturn thisInstance;\n\t\t}\n\t}\n\n\twlcCanvasAnimationController[pN_isJQueryWrappedObjectOrAlike] = function (object) {\n\t\treturn wlcCanvasAnimationController[pN_isJQueryWrappedObject](object)\n\t\t\t|| (!!object && !!object[0] && object[0] instanceof Node);\n\t};\n\n\twlcCanvasAnimationController[pN_isJQueryWrappedObject] = function (object) {\n\t\tvar prototype = Object.getPrototypeOf(object);\n\t\treturn !!prototype && !!prototype.jquery;\n\t};\n\n\twlcCanvasAnimationController[pN_isValidColor] = function (color) {\n\t\treturn typeof color === 'string' || !!color;\n\t};\n\n\treturn wlcCanvasAnimationController;\n});\n"]}